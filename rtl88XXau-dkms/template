# Template file for 'rtl88XXau-dkms'
pkgname=rtl88XXau-dkms
version=5.6.4.2 
revision=1
_gitrev=8b29c11f9ba6cc56045e0fbedc144241ef179598
archs=noarch
wrksrc="rtl8812au-${_gitrev}"
depends="dkms"
short_desc="RTL8812AU/21AU and RTL8814AU drivers"
maintainer="_biopsin <biopsin@gmail.com>"
license="GPL-2.0-only"
homepage="https://www.asus.com/us/Networking/USB-AC68/"
distfiles="https://github.com/aircrack-ng/rtl8812au/archive/${_gitrev}.tar.gz"
checksum=1a6ba467f8c0a6ce6673182dceff4030891cb4cfe4259bfc8780c46206d38900
dkms_modules="rtl88XXau 5.6.4.2"

do_install() {
	local modname=rtl88XXau
	local modver=5.6.4.2
	local dest=/usr/src/${modname}-${modver}

	vmkdir ${dest}
	cp -r dkms.conf Kconfig Makefile platform core hal include os_dep ${DESTDIR}/${dest}

	# modules-load.d(5) file.
	vmkdir usr/lib/modules-load.d
	echo "88XXau" > ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
	chmod 644 ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
}

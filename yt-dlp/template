# Template file for 'yt-dlp'
pkgname=yt-dlp
version=2021.09.25
revision=1
build_style=python3-module
hostmakedepends="python3-setuptools"
depends="python3-setuptools"
checkdepends="flake8 python3-mutagen python3-pycryptodome python3-websockets"
short_desc="CLI program to download media from sites"
maintainer="biopsin <biopsin@teknik.io>"
license="Unlicense"
homepage="https://github.com/yt-dlp/yt-dlp"
distfiles="${homepage}/archive/refs/tags/${version}.tar.gz"
checksum=ae08e0b56fea59a8bfdadacd92eddc9bdfdc1473199178cb4e31bacfd991864a

do_check() {
	PYTHON=/usr/bin/python3 make offlinetest
}

post_install() {
	# Symlink to youtube-dl for compatibility
	ln -s yt-dlp ${DESTDIR}/usr/bin/youtube-dl
}

# Template file for 'libSwell'
pkgname=libSwell
version=201122
revision=1
_commit=d9d1f2bd9ae6866be96a1db46e1f294ec7d35d8e
wrksrc="WDL-${_commit}"
build_style=gnu-configure
make_build_args="GDK2=1"
hostmakedepends="pkg-config"
makedepends="gtk+-devel libXi-devel"
short_desc="WDL is a set of simple C++ classes"
maintainer="biopsin <biopsin@protonmail.com>"
license="GPL-2-or-later"
homepage="https://github.com/justinfrankel/WDL"
distfiles="https://github.com/justinfrankel/WDL/archive/${_commit}.tar.gz"
checksum=822327e5ed25a78c8155f1d48337f0172a58b1ff637c0a307994afc8427822dd

do_configure() {
    pkg-config --cflags --libs gtk+-2.0
}

do_build() {
    cd ${wrksrc}/WDL/swell
    make ${make_build_args}
    # Create the default colortheme
    make ${make_build_args} libSwell.colortheme
}

#post_build() {
#    # Use custom colortheme
#    cp ${FILESDIR}/* ${wrksrc}/WDL/swell
#}

do_install() {
    mkdir -p ${DESTDIR}/usr/lib/swell
    cp ${wrksrc}/WDL/swell/{libSwell.so,libSwell.colortheme} ${DESTDIR}/usr/lib/swell

    # Override prebuilt swell
    vmkdir usr/libexec/reaper
    ln -sf /usr/lib/swell/libSwell.so "${DESTDIR}/usr/libexec/reaper"
    ln -sf /usr/lib/swell/libSwell.colortheme "${DESTDIR}/usr/libexec/reaper"
}

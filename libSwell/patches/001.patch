From 49eebb243300a7b4684b0305cb5203354698b083 Mon Sep 17 00:00:00 2001
From: Marcus Gursch <marcus.gursch@rub.de>
Date: Wed, 5 May 2021 15:50:12 +0200
Subject: [PATCH] swell: draw border around listview and treeview

---
 WDL/swell/swell-internal.h      | 6 +++++-
 WDL/swell/swell-wnd-generic.cpp | 7 +++++++
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/WDL/swell/swell-internal.h b/WDL/swell/swell-internal.h
index c5e90c8a..deaa6c0c 100644
--- a/WDL/swell/swell-internal.h
+++ b/WDL/swell/swell-internal.h
@@ -1253,6 +1253,8 @@ static void __listview_mergesort_internal(void *base, size_t nmemb, size_t size,
   fd(listview_text_sel, RGB(0,0,0), listview_text) \
   fd(listview_grid, RGB(224,224,224), _3dhilight) \
   f(listview_hdr_arrow,RGB(96,96,96)) \
+  fd(listview_shadow, RGB(96,96,96), _3dshadow) \
+  fd(listview_hilight, RGB(224,224,224), _3dhilight) \
   fd(listview_hdr_shadow, RGB(96,96,96), _3dshadow) \
   fd(listview_hdr_hilight, RGB(224,224,224), _3dhilight) \
   fd(listview_hdr_bg, RGB(192,192,192), _3dface) \
@@ -1262,6 +1264,8 @@ static void __listview_mergesort_internal(void *base, size_t nmemb, size_t size,
   f(treeview_bg_sel, RGB(128,128,255)) \
   f(treeview_text_sel, RGB(0,0,0)) \
   f(treeview_arrow, RGB(96,96,96)) \
+  fd(treeview_shadow, RGB(96,96,96), _3dshadow) \
+  fd(treeview_hilight, RGB(224,224,224), _3dhilight) \
   fd(tab_shadow, RGB(96,96,96), _3dshadow) \
   fd(tab_hilight, RGB(224,224,224), _3dhilight) \
   fd(tab_text, RGB(0,0,0), button_text) \
@@ -1270,9 +1274,9 @@ static void __listview_mergesort_internal(void *base, size_t nmemb, size_t size,
   fd(group_shadow, RGB(96,96,96), _3dshadow) \
   fd(group_hilight, RGB(224,224,224), _3dhilight) \
   f(focus_hilight, RGB(140,190,233)) \
-
   
 
+
 struct swell_colortheme {
 #define __def_theme_ent(x,c) int x;
 #define __def_theme_ent_fb(x,c,fb) int x;
diff --git a/WDL/swell/swell-wnd-generic.cpp b/WDL/swell/swell-wnd-generic.cpp
index 6b8654cc..5b2d4e96 100644
--- a/WDL/swell/swell-wnd-generic.cpp
+++ b/WDL/swell/swell-wnd-generic.cpp
@@ -4658,6 +4658,7 @@ static LRESULT listViewWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lPa
         {
           RECT cr; 
           GetClientRect(hwnd,&cr); 
+          RECT rr = cr;
           HBRUSH bgbr = CreateSolidBrush(lvs->m_color_bg);
           FillRect(ps.hdc,&cr,bgbr);
           DeleteObject(bgbr);
@@ -4966,6 +4967,9 @@ static LRESULT listViewWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lPa
                   totalw,lvs->m_scroll_x);
             }
           }
+          Draw3DBox(ps.hdc,&rr,-1,
+            g_swell_ctheme.listview_hilight,
+            g_swell_ctheme.listview_shadow);
           DeleteObject(bgbr);
 
           EndPaint(hwnd,&ps);
@@ -5655,6 +5659,9 @@ static LRESULT treeViewWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lPa
             DeleteObject(br);
 
             drawVerticalScrollbar(ps.hdc,cr,total_h,tvs->m_scroll_y);
+            Draw3DBox(ps.hdc,&cr,-1,
+              g_swell_ctheme.treeview_hilight,
+              g_swell_ctheme.treeview_shadow);
           }
 
           EndPaint(hwnd,&ps);
